<%- include('layouts/header.ejs') %>
<script>
    if(window.history.replaceState)
    {
      window.history.replaceState(null,null,window.location.href)
    }
  </script>
<%- include('layouts/sidenav.ejs') %>
        
          <section class="maincontent">
                <div class="container">
                    <div class="row">
                        <div class="usermain p-3  col-md-12">
                        <div class="titlemain"><h2 class="fw-bold ps-4  my-3">EDIT PRODUCT</h2>
                            <!-- <a class="pe-4  my-3" href=""><button type="submit">Add New Product</button></a> -->
                        </div>
                        <div class="container">
                            <form action="/admin/products/editproduct" method="post" id="proform" enctype="multipart/form-data">
                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">1.General Info</h4>
                                </div>
                                <% if(locals.prodata) { %>
                                <div class="proform col-md-10">
                                    <label for="productname">Product Name</label>
                                    <input type="text" id="productname" name="productname" class="form-control" value="<%= locals.prodata.productname %>">
                                    <p class="perror mb-2" id="error1" style="display: none;"></p>
                                    <label for="description">Description</label>
                                    <textarea name="description" id="description" cols="30" rows="5" class="form-control" ><%= locals.prodata.description %></textarea>
                                    <p class="perror mb-2" id="error2" style="display: none;"></p>
                                    <label for="color">Color</label>
                                    <input type="text" id="color" name="color" class="form-control" value="<%= locals.prodata.color %>">
                                    <p class="perror mb-2" id="error3" style="display: none;"></p>
                                </div>
                            </div>
                            <input type="hidden" name="proid" value="<%= locals.prodata._id %>">
                            <input type="hidden" name="oldmain" value="<%= locals.prodata.mainimage %>">
                            <input type="hidden" name="oldimg1" value="<%= locals.prodata.image[0] %>">
                            <input type="hidden" name="oldimg2" value="<%= locals.prodata.image[1] %>">
                            <input type="hidden" name="oldimg3" value="<%= locals.prodata.image[2] %>">
                            <input type="hidden" name="oldimg4" value="<%= locals.prodata.image[3] %>">

                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">2.Brand</h4>
                                </div>
                                <div class="proform col-md-10">
                                    <label for="brandname">Brand Name</label>
                                    <!-- <input type="text" id="brandname" name="brandname" class="form-control"> -->
                                    <select name="brandname" class="form-control" id="brandname">

                                        <option value="<%= locals.prodata.brand_id._id %>"><%= locals.prodata.brand_id.brandname %></option>
                                        

                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">3.Category</h4>
                                </div>
                                <div class="proform col-md-10">
                                    <label for="procategory">Product Category</label>
                                    <select name="procategory" class="form-control" id="procategory">
                                        <option value="<%= locals.prodata.category_id._id %>"><%= locals.prodata.category_id.categoryname %></option>


                                    </select>
                                    <label for="roomcategory">Room Category</label>
                                    <select name="roomcategory" class="form-control" id="roomcategory">
                                        <option value="<%= locals.prodata.room_id._id %>"><%= locals.prodata.room_id.roomname %></option>


                                    </select>
                                    
                                </div>
                            </div>

                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">4.Pricing</h4>
                                </div>
                                <div class="proform col-md-10">
                                    <label for="price">Price</label>
                                    <input type="number" id="price" name="price" class="form-control" value="<%= locals.prodata.price %>">
                                    <p class="perror mb-2" id="error4" style="display: none;"></p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">5.Media</h4>
                                </div>
                                <div class="proform col-md-10">
                                    <div class="imgdiv">
                                        
                                    <div class="inplab w-50"><label for="mainimage">Main Image</label>
                                    <input type="file" id="mainimage" name="mainimage" class="form-control" ></div>
                                    <div class="imgtxt w-25"><img class="w-100" src="/assets/<%= locals.prodata.mainimage %>" alt=""  height="150px">
                                    <p class="mt-1">Preview</p>
                                    </div>
                                </div>
                                <div class="imgdiv">
                                    <div class="inplab w-50"><label for="img1"> Image</label>
                                    <input type="file" id="img1" name="img1" class="form-control" ></div>
                                    <div class="imgtxt w-25">
                                    <img class="w-100" src="/assets/<%= locals.prodata.image[0] %>" alt=""  height="150px">
                                    <p class="mt-1">Preview</p>
                                    </div>
                                </div>
                                <div class="imgdiv">
                                    <div class="inplab w-50"><label for="img2"> Image</label>
                                    <input type="file" id="img2" name="img2" class="form-control" ></div>
                                    <div class="imgtxt w-25">
                                    <img class="w-100" src="/assets/<%= locals.prodata.image[1] %>" alt=""  height="150px">
                                    <p class="mt-1">Preview</p></div>  
                                </div>    
                                <div class="imgdiv">
                                    <div class="inplab w-50"><label for="img3"> Image</label>
                                    <input type="file" id="img3" name="img3" class="form-control" ></div>
                                    <div class="imgtxt w-25">
                                        <img class="w-100" src="/assets/<%= locals.prodata.image[2] %>" alt=""  height="150px">
                                        <p class="mt-1">Preview</p></div> 
                                </div>   
                                <div class="imgdiv"> 
                                    <div class="inplab"><label for="img4"> Image</label>
                                    <input type="file" id="img4" name="img4" class="form-control" ></div>
                                    <div class="imgtxt w-25">
                                        <img class="w-100" src="/assets/<%= locals.prodata.image[3] %>" alt=""  height="150px">
                                        <p class="mt-1">Preview</p></div> 
                            </div>
                            </div>

                            <div class="row">
                                <div class="prolabel col-md-2">
                                    <h4 class="fw-bold">6.Others</h4>
                                </div>
                                <div class="proform col-md-10">
                                    <label for="stock">Stock</label>
                                    <input type="number" id="stock" name="stock" class="form-control" value="<%= locals.prodata.stock %>">
                                    <p class="perror mb-2" id="error5" style="display: none;"></p>
                                    <label for="offer">Offer</label>
                                    <select name="offer" class="form-control" id="offer" >
                                        <option value="<%= locals.prodata.offer_id %>"><%= locals.prodata.offer_id %></option>


                                    </select>
                                </div>
                            </div>
                            <div class="probtn mt-5 mb-2"><button type="submit" class="btn" >Edit Product</button></div>
                            <% } %>
                        </form>
                        </div>
                        
                </div>
                </div>
                </div>              
          </section>
      </main>


      <script src="/public/js/editproduct.js"></script>
<%- include('layouts/footer.ejs') %>
